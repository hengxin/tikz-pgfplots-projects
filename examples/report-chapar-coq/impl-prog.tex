% impl-prog.tex

\documentclass[tikz]{standalone}
\usepackage{amsmath, amsfonts}
\usetikzlibrary{positioning, shapes, decorations.pathreplacing}

\newcommand{\acos}{$\textsl{COS}_{\mathcal{A}}$} % abstract causal operational semantics

\begin{document}
\begin{tikzpicture}[rect/.style = {draw, very thick, rectangle, inner sep = 6pt}, % rectangle
  rrect/.style = {rect, rounded corners}, % rounded rectangle
  cc/.style = {draw, cloud, cloud puffs = 10, cloud puff arc = 120, aspect = 2, 
  	inner xsep = 0.3em, inner ysep = 0.3em, align = center, red},
]
  \node (prog) [rrect] {$\mathbb{P}$: Client Program};
  \node (impl) [rrect, below = 5.0cm of prog] {$\mathbb{I}$: KV Store Implementation};

  % \pause
  \node (prog-cc) [cc, right = 2.0cm of prog] {Causally \\ Content};
  \node (impl-cc) [cc, right = 1.0cm of impl] {Causal \\ Consistency};

  % \pause
  \node (abs) [blue, rect, below = 2.0cm of prog] {\acos: Abstract Causal Operational Semantics};

  % \uncover<6->{ 
  \draw [purple, thick, decorate, decoration = {brace, amplitude = 10pt, mirror, raise = 130pt}] 
  	(prog.center) to node [xshift = -150pt, above, rotate = 90, font = \Large] {Interface} (impl.center);
  % }
\end{tikzpicture}
\end{document}
