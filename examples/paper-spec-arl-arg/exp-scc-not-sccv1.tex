\documentclass[tikz]{standalone}
\usetikzlibrary{positioning}
\input{newcommands}
\renewcommand{\va}[2]{\draw [->, thick, allow upside down] (#1) to node[below, sloped, pos=0.5] {$\Large{\vs},\Large{\arb}$} (#2);}
\renewcommand{\vab}[2]{\draw [->, thick, allow upside down] (#1) to node[above, sloped, pos=0.5] {$\Large{\vs},\Large{\arb}$} (#2);}
\newcommand{\pvb}[2]{\draw [->, thick] (#1) to node[below] {$\Large{\so},\Large{\vs},\Large{\arb}$} (#2);}
\renewcommand{\vas}[2]{\draw [->, thick] (#1) to node[above, sloped, pos=0.5] {$\Large{\vs},\Large{\arb}$} (#2);}

\begin{document}
\begin{tikzpicture}
\tikzset{
  enq-op/.style = {rectangle, rounded corners, fill = blue!30, draw, font = \Large},
  deq-op/.style = {rectangle, rounded corners, fill = yellow!30, draw, font = \Large},
  process/.style = {font = \huge}, po/.style = {->, very thick},
  vis/.style = {rectangle, font = \Large}
}

  %\node (p1) [process] {$p_1:$};
  %\node (p1-enq1) [enq-op, right = 0.5cm of p1] {$p.\enq(1)$};
  \node (p1-enq1) [enq-op] {$p.\enq(1)$};
  \node (p1-enq2) [enq-op, right = 2.6cm of p1-enq1] {$q.\enq(2)$};
  \node (p1-deq3) [deq-op, right = 2.6cm of p1-enq2] {$p.\deq\triangleright3$};

  %\node (p2) [process, below = 0.7cm of p1] {$p_2:$};
  \node (p2-deq2) [deq-op, below = 0.7cm of p1-enq1] {$q.\deq\triangleright2$};
  \node (p2-deq1) [deq-op, below = 0.7cm of p1-enq2] {$q.\deq\triangleright1$};

  %\node (p3) [process, below = 0.7cm of p2] {$p_3:$};
  \node (p3-enq1) [enq-op, below = 0.7cm of p2-deq2] {$q.\enq(1)$};
  \node (p3-deq0) [deq-op, right = 2.6cm of p3-enq1] {$p.\deq\triangleright\bot$};
  \node (p3-enq3) [enq-op, right = 2.4cm of p3-deq0] {$p.\enq(3)$};

  %\node [vis, below left = 0.05cm and 1.6cm of p2-deq1] {$\vs,\arb$};
  %\node [vis, below left = 0.05cm and 1.6cm of p1-enq2] {$\vs,\arb$};

  \pva{p1-enq1}{p1-enq2};
  \pva{p1-enq2}{p1-deq3};
  \pva{p2-deq2}{p2-deq1};
  \pvb{p3-enq1}{p3-deq0};
  \pva{p3-deq0}{p3-enq3};

  \va{p3-enq3}{p1-deq3};
  \vas{p1-enq2}{p2-deq2};
  \vab{p3-enq1}{p2-deq1};

\end{tikzpicture}
\end{document}
