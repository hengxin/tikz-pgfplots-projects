% g-polygraph.tex

\documentclass{standalone}
\input{newcommands}

\usepackage{tikz}
\usetikzlibrary{shapes, positioning, arrows.meta, decorations.pathmorphing}

\begin{document}
\begin{tikzpicture}[
  node distance = 1.5cm and 2.0cm,
  wr/.style = {->, thick},
  ww/.style = {->, thick, dashed},
  rw/.style = {->, thick, dotted},
  txn/.style = {draw, inner sep = 2pt}]

  \node[txn, label = above : $T$] (t) {$\writeevent(\keyxvar, 1)$};
  \node[txn, label = above : $T'$, right = of t] (tprime) {$\readevent(\keyxvar, 1)$};

  \node[txn, below = of t, label = below: $S$] (s) {$\writeevent(\keyxvar, 2)$};
  \node[txn, right = of s, label = below : $S'$] (sprime) {$\readevent(\keyxvar, 2)$};

  \draw[wr] (t) to node[above]{$\WR(\keyxvar)$} (tprime);
  \draw[wr] (s) to node[below]{$\WR(\keyxvar)$} (sprime);

  \draw[ww] (t.210) coordinate (t210) to node[near start] {$\WW(\keyxvar)$} (t210 |- s.north);
  \draw[rw] (tprime.south) to node[near start]{$\RW(\keyxvar)$} (t210 |- s.north);

  \draw[ww] (s.30) coordinate (s30) to node[near start] {$\WW(\keyxvar)$} (s30 |- t.south);
  \draw[rw] (sprime.north) to node[near start]{$\RW(\keyxvar)$} (s30 |- t.south);
\end{tikzpicture}
\end{document}