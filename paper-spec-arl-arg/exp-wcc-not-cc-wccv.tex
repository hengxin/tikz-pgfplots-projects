\documentclass[tikz]{standalone}
\usetikzlibrary{positioning}
\input{newcommands}

\renewcommand{\va}[2]{\draw [->, thick, allow upside down] (#1) to [out=30, in=150] node[above,sloped]{$\Large{\so}$} node[below, sloped] {$\Large{\vs},\Large{\arb}$} (#2);}
\renewcommand{\vae}[2]{\draw [->, thick, allow upside down] (#1) to node[below, sloped, pos=0.7] {$\Large{\vs},\Large{\arb}$} (#2);}
\renewcommand{\vas}[2]{\draw [->, thick, allow upside down] (#1) to node[below, sloped, pos = 0.25] {$\Large{\vs},\Large{\arb}$} (#2);}

\begin{document}
\begin{tikzpicture}
\tikzset{
  enq-op/.style = {rectangle, rounded corners, fill = blue!30, draw, font = \Large},
  deq-op/.style = {rectangle, rounded corners, fill = yellow!30, draw, font = \Large},
  process/.style = {font = \huge}, po/.style = {->, very thick},
  vis/.style = {->, shorten >= 3pt, very thick, dashed}
}

  \node (p1) [process] {$p_1:$};
  \node (p1-enq1) [enq-op, right = 0.5cm of p1] {$\enq(1)$};
  \node (p1-deq1) [deq-op, right = 1.6cm of p1-enq1] {$a:\deq\triangleright1$};
  \node (p1-deq1') [deq-op, right = 1.6cm of p1-deq1] {$b:\deq\triangleright1$};

  \node (p2) [process, below = 1.4cm of p1] {$p_2:$};
  \node (p2-enq2) [enq-op, right = 2.0cm of p2] {$\enq(2)$};
  \node (p2-deq1) [deq-op, right = 2.0cm of p2-enq2] {$c:\deq\triangleright1$};

  \pbva{p1-enq1}{p1-deq1};
  \pbva{p1-deq1}{p1-deq1'};
  \pbva{p2-enq2}{p2-deq1};

  \vae{p2-enq2}{p1-deq1'};
  \va{p1-enq1}{p1-deq1'};
  \vas{p1-enq1}{p2-deq1};
  \vas{p1-deq1}{p2-deq1};
\end{tikzpicture}
\end{document}
